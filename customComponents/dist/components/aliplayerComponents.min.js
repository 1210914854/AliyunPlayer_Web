!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=18)}([function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},r=0;r<this.length;r++){var o=this[r][0];"number"==typeof o&&(i[o]=!0)}for(r=0;r<e.length;r++){var s=e[r];"number"==typeof s[0]&&i[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),t.push(s))}},t}},function(t,e){function n(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=u[i.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](i.parts[o]);for(;o<i.parts.length;o++)r.parts.push(h(i.parts[o],e))}else{for(var s=[],o=0;o<i.parts.length;o++)s.push(h(i.parts[o],e));u[i.id]={id:i.id,refs:1,parts:s}}}}function i(t){for(var e=[],n={},i=0;i<t.length;i++){var r=t[i],o=r[0],s=r[1],a=r[2],h=r[3],l={css:s,media:a,sourceMap:h};n[o]?n[o].parts.push(l):e.push(n[o]={id:o,parts:[l]})}return e}function r(t,e){var n=m(),i=b[b.length-1];if("top"===t.insertAt)i?i.nextSibling?n.insertBefore(e,i.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),b.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function o(t){t.parentNode.removeChild(t);var e=b.indexOf(t);e>=0&&b.splice(e,1)}function s(t){var e=document.createElement("style");return e.type="text/css",r(t,e),e}function a(t){var e=document.createElement("link");return e.rel="stylesheet",r(t,e),e}function h(t,e){var n,i,r;if(e.singleton){var h=g++;n=y||(y=s(e)),i=l.bind(null,n,h,!1),r=l.bind(null,n,h,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=a(e),i=p.bind(null,n),r=function(){o(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(e),i=c.bind(null,n),r=function(){o(n)});return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else r()}}function l(t,e,n,i){var r=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=v(e,r);else{var o=document.createTextNode(r),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}function c(t,e){var n=e.css,i=e.media;if(i&&t.setAttribute("media",i),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function p(t,e){var n=e.css,i=e.sourceMap;i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var r=new Blob([n],{type:"text/css"}),o=t.href;t.href=URL.createObjectURL(r),o&&URL.revokeObjectURL(o)}var u={},d=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}},f=d(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),m=d(function(){return document.head||document.getElementsByTagName("head")[0]}),y=null,g=0,b=[];t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");e=e||{},void 0===e.singleton&&(e.singleton=f()),void 0===e.insertAt&&(e.insertAt="bottom");var r=i(t);return n(r,e),function(t){for(var o=[],s=0;s<r.length;s++){var a=r[s],h=u[a.id];h.refs--,o.push(h)}if(t){n(i(t),e)}for(var s=0;s<o.length;s++){var h=o[s];if(0===h.refs){for(var l=0;l<h.parts.length;l++)h.parts[l]();delete u[h.id]}}}};var v=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(3);n(5);var r=Aliplayer.Component({init:function(t,e){this.adAddress=t,this.toAddress=e,this.$html=$(i)},createEl:function(t){this.$html.find(".ad").attr("src",this.adAddress);var e=this.$html.find(".ad-wrapper");e.attr("href",this.toAddress),e.click(function(){Aliplayer.util.stopPropagation()}),this.$html.find(".close").click(function(){this.$html.hide()}),$(t).append(this.$html)},ready:function(t,e){},play:function(t,e){this.$html.hide()},pause:function(t,e){this.$html.show()},playing:function(t,e){this.$html.hide()},waiting:function(t,e){},timeupdate:function(t,e){},error:function(t,e){},ended:function(t,e){this.$html.show()}});e.default=r},function(t,e,n){t.exports='<div class="ad-container">\n    <span>广告</span>\n    <img class="close" src="'+n(4)+'"></img>\n    <a class=\'ad-wrapper\' target="_blank">\n       <img class="ad"></img>\n    </a>\n</div>'},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpCNzdDNzkwNTE1MjA2ODExODIyQTg3RDcyQkRGNjk2MiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo3Rjg1NzQ2NDY0MjYxMUU2ODk0QUZBRTg4N0Y5MDgxRCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo3Rjg1NzQ2MzY0MjYxMUU2ODk0QUZBRTg4N0Y5MDgxRCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OUU0MTk5OEUxRTIwNjgxMTgyMkE4N0Q3MkJERjY5NjIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6Qjc3Qzc5MDUxNTIwNjgxMTgyMkE4N0Q3MkJERjY5NjIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7gi5EfAAABEklEQVR42qyUTQ6CMBCFW004hLrSU3gL/zd6Cb0AsJSt3kIT40lcG2N0oXdQN/W9pJgKLT/iSz5Spp0HZcpIpZSwyAM9TRc0wAvcwAHswF7HvkXDBH1wUvnimkEy37ypg6Uqr6XOTRn+YmaafhmOVHXRQ0hcWIAzaIlquoN2DZdx0iwIAiGlFGEYprIY4xzXJNQEE253Y3t/3/d5nhQSPzGOGeOcQ1saXl2zpmkBM+pKw0fWiti0gBn1rFlPuyF+L9vYKbgeXY8zt2n7pq4tb/LMsgplK8q0iFlB09m/D3YnLspCVNccPM3mEFX4jyNX+1r9YLZ2ta+YYYkGO8pqsCaerv4WXMBLc9GxqV6Tyn0LMACAi/Wdy4svogAAAABJRU5ErkJggg=="},function(t,e,n){var i=n(6);"string"==typeof i&&(i=[[t.i,i,""]]);n(1)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(0)(),e.push([t.i,".ad-container\n{\n\tdisplay:none;\n\tposition:absolute;\n\tleft:50%;\n\ttop:50%;\n\tmargin-left:-150px;\n\tmargin-top:-100px;\n}\n\n.ad-container span\n{\n\twidth: 27px;\n    height: 16px;\n    border-radius: 1px;\n    background-color: rgba(0,0,0,.5);\n    position: absolute;\n    font-size: 10px;\n    color: #fff;\n    line-height: 16px;\n    text-align: center;\n    top:0px;\n    left:0px;\n}\n\n.ad-container .close\n{\n\tposition:absolute;\n\ttop:2px;\n\tright:2px;\n\twidth: 20px;\n    height: 20px;\n}\n\n.ad-container .close:hover\n{\n\tcursor:pointer;\n}\n\n.ad-container .ad\n{\n\twidth:300px;\n\theight:200px;\n}",""])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(8),r=function(t){return t&&t.__esModule?t:{default:t}}(i);n(9),n(11);var o=n(13),s=Aliplayer.Component({init:function(){this._isStarted=!1,this.$html=$(o)},createEl:function(t){var e=$(t),n=e.height()-e.find(".prism-controlbar").height();this.$html.height(n),e.append(this.$html),this.CM=new r.default(this.$html[0]),this.CM.init(),console.log("stage width:"+this.CM.width),console.log("stage height:"+this.CM.height)},ready:function(t,e){},play:function(t,e){},pause:function(t,e){this.stop()},playing:function(t,e){this.start()},waiting:function(t,e){},timeupdate:function(t,e){},error:function(t,e){this.stop()},ended:function(t,e){this.stop()},dispose:function(t,e){}});s.prototype.insert=function(t){this.CM.insert(t)},s.prototype.start=function(){this._isStarted||(this.CM.start(),this._isStarted=!0)},s.prototype.stop=function(){this._isStarted&&this.CM.start()},s.prototype.send=function(t){this._isStarted&&this.CM.send(t)},s.prototype.time=function(t){this.CM.load(t)},e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){var t={};return t.bsearch=function(t,e,n){if(!Array.isArray(t))throw new Error("Bsearch can only be run on arrays");if(0===t.length)return 0;if(n(e,t[0])<0)return 0;if(n(e,t[t.length-1])>=0)return t.length;for(var i=0,r=0,o=0,s=t.length-1;i<=s;){if(r=Math.floor((s+i+1)/2),o++,n(e,t[r-1])>=0&&n(e,t[r])<0)return r;if(n(e,t[r-1])<0)s=r-1;else{if(!(n(e,t[r])>=0))throw new Error("Program Error. Inconsistent comparator or unsorted array!");i=r}if(o>1500)throw new Error("Iteration depth exceeded. Inconsistent comparator or astronomical dataset!")}return-1},t.binsert=function(e,n,i){var r=t.bsearch(e,n,i);return e.splice(r,0,n),r},t}();!function(t){var e=function(){function t(t){if(this._internalArray=null,!Array.isArray(t))throw new Error("Not an array. Cannot construct matrix.");if(16!=t.length)throw new Error("Illegal Dimensions. Matrix3D should be 4x4 matrix.");this._internalArray=t}return Object.defineProperty(t.prototype,"flatArray",{get:function(){return this._internalArray.slice(0)},set:function(t){throw new Error("Not permitted. Matrices are immutable.")},enumerable:!0,configurable:!0}),t.prototype.isIdentity=function(){return this.equals(t.identity())},t.prototype.dot=function(e){for(var n=this._internalArray.slice(0),i=e._internalArray.slice(0),r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o=0;o<4;o++)for(var s=0;s<4;s++)for(var a=0;a<4;a++)r[4*o+s]+=n[4*o+a]*i[4*a+s];return new t(r)},t.prototype.equals=function(t){for(var e=0;e<16;e++)if(this._internalArray[e]!==t._internalArray[e])return!1;return!0},t.prototype.toCss=function(){for(var t=this._internalArray.slice(0),e=0;e<t.length;e++)Math.abs(t[e])<1e-6&&(t[e]=0);return"matrix3d("+t.join(",")+")"},t.identity=function(){return new t([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])},t.createScaleMatrix=function(e,n,i){return new t([e,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1])},t.createRotationMatrix=function(e,n,i){var r=Math.PI/180,o=n*r,s=i*r,a=Math.cos,h=Math.sin;return new t([a(o)*a(s),a(o)*h(s),h(o),0,-h(s),a(s),0,0,-h(o)*a(s),-h(o)*h(s),a(o),0,0,0,0,1].map(function(t){return 1e-10*Math.round(1e10*t)}))},t}();t.Matrix3D=e}(i||(i={}));var s=function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},a=function(){function t(e,n){if(void 0===n&&(n={}),this.mode=1,this.stime=0,this.text="",this.ttl=4e3,this.dur=4e3,this.cindex=-1,this.motion=[],this.movable=!0,this._alphaMotion=null,this.absolute=!0,this.align=0,this.axis=0,this._alpha=1,this._size=25,this._color=16777215,this._border=!1,this._shadow=!0,this._font="",this._transform=null,!e)throw new Error("Comment not bound to comment manager.");if(this.parent=e,n.hasOwnProperty("stime")&&(this.stime=n.stime),n.hasOwnProperty("mode")?this.mode=n.mode:this.mode=1,n.hasOwnProperty("dur")&&(this.dur=n.dur,this.ttl=this.dur),this.dur*=this.parent.options.global.scale,this.ttl*=this.parent.options.global.scale,n.hasOwnProperty("text")&&(this.text=n.text),n.hasOwnProperty("motion")){this._motionStart=[],this._motionEnd=[],this.motion=n.motion;for(var r=0,o=0;o<n.motion.length;o++){this._motionStart.push(r);var s=0;for(var a in n.motion[o]){var h=n.motion[o][a];s=Math.max(h.dur,s),null!==h.easing&&void 0!==h.easing||(n.motion[o][a].easing=t.LINEAR)}r+=s,this._motionEnd.push(r)}this._curMotion=0}n.hasOwnProperty("color")&&(this._color=n.color),n.hasOwnProperty("size")&&(this._size=n.size),n.hasOwnProperty("border")&&(this._border=n.border),n.hasOwnProperty("opacity")&&(this._alpha=n.opacity),n.hasOwnProperty("alpha")&&(this._alphaMotion=n.alpha),n.hasOwnProperty("font")&&(this._font=n.font),n.hasOwnProperty("x")&&(this._x=n.x),n.hasOwnProperty("y")&&(this._y=n.y),n.hasOwnProperty("shadow")&&(this._shadow=n.shadow),n.hasOwnProperty("align")&&(this.align=n.align),n.hasOwnProperty("axis")&&(this.axis=n.axis),n.hasOwnProperty("transform")&&(this._transform=new i.Matrix3D(n.transform)),n.hasOwnProperty("position")&&"relative"===n.position&&(this.absolute=!1,this.mode<7&&console.warn("Using relative position for CSA comment."))}return t.prototype.init=function(t){void 0===t&&(t=null),this.dom=null!==t?t.dom:document.createElement("div"),this.dom.className=this.parent.options.global.className,this.dom.appendChild(document.createTextNode(this.text)),this.dom.textContent=this.text,this.dom.innerText=this.text,this.size=this._size,16777215!=this._color&&(this.color=this._color),this.shadow=this._shadow,this._border&&(this.border=this._border),""!==this._font&&(this.font=this._font),void 0!==this._x&&(this.x=this._x),void 0!==this._y&&(this.y=this._y),(1!==this._alpha||this.parent.options.global.opacity<1)&&(this.alpha=this._alpha),null===this._transform||this._transform.isIdentity()||(this.transform=this._transform.flatArray),this.motion.length>0&&this.animate()},Object.defineProperty(t.prototype,"x",{get:function(){return null!==this._x&&void 0!==this._x||(this.axis%2==0?this.align%2==0?this._x=this.dom.offsetLeft:this._x=this.dom.offsetLeft+this.width:this.align%2==0?this._x=this.parent.width-this.dom.offsetLeft:this._x=this.parent.width-this.dom.offsetLeft-this.width),this.absolute?this._x:this._x/this.parent.width},set:function(t){this._x=t,this.absolute||(this._x*=this.parent.width),this.axis%2==0?this.dom.style.left=this._x+(this.align%2==0?0:-this.width)+"px":this.dom.style.right=this._x+(this.align%2==0?-this.width:0)+"px"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return null!==this._y&&void 0!==this._y||(this.axis<2?this.align<2?this._y=this.dom.offsetTop:this._y=this.dom.offsetTop+this.height:this.align<2?this._y=this.parent.height-this.dom.offsetTop:this._y=this.parent.height-this.dom.offsetTop-this.height),this.absolute?this._y:this._y/this.parent.height},set:function(t){this._y=t,this.absolute||(this._y*=this.parent.height),this.axis<2?this.dom.style.top=this._y+(this.align<2?0:-this.height)+"px":this.dom.style.bottom=this._y+(this.align<2?-this.height:0)+"px"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){var t=Math.floor(this.axis/2)===Math.floor(this.align/2);return this.y+(t?this.height:0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){var t=this.axis%2==this.align%2;return this.x+(t?this.width:0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return null!==this._width&&void 0!==this._width||(this._width=this.dom.offsetWidth),this._width},set:function(t){this._width=t,this.dom.style.width=this._width+"px"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return null!==this._height&&void 0!==this._height||(this._height=this.dom.offsetHeight),this._height},set:function(t){this._height=t,this.dom.style.height=this._height+"px"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._size},set:function(t){this._size=t,this.dom.style.fontSize=this._size+"px"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){return this._color},set:function(t){this._color=t;var e=t.toString(16);e=e.length>=6?e:new Array(6-e.length+1).join("0")+e,this.dom.style.color="#"+e,0===this._color&&(this.dom.className=this.parent.options.global.className+" rshadow")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{get:function(){return this._alpha},set:function(t){this._alpha=t,this.dom.style.opacity=Math.min(this._alpha,this.parent.options.global.opacity)+""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"border",{get:function(){return this._border},set:function(t){this._border=t,this._border?this.dom.style.border="1px solid #00ffff":this.dom.style.border="none"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadow",{get:function(){return this._shadow},set:function(t){this._shadow=t,this._shadow||(this.dom.className=this.parent.options.global.className+" noshadow")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"font",{get:function(){return this._font},set:function(t){this._font=t,this._font.length>0?this.dom.style.fontFamily=this._font:this.dom.style.fontFamily=""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"transform",{get:function(){return this._transform.flatArray},set:function(t){this._transform=new i.Matrix3D(t),null!==this.dom&&(this.dom.style.transform=this._transform.toCss())},enumerable:!0,configurable:!0}),t.prototype.time=function(t){this.ttl-=t,this.ttl<0&&(this.ttl=0),this.movable&&this.update(),this.ttl<=0&&this.finish()},t.prototype.update=function(){this.animate()},t.prototype.invalidate=function(){this._x=null,this._y=null,this._width=null,this._height=null},t.prototype._execMotion=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];this[n]=i.easing(Math.min(Math.max(e-i.delay,0),i.dur),i.from,i.to-i.from,i.dur)}},t.prototype.animate=function(){if(this._alphaMotion&&(this.alpha=(this.dur-this.ttl)*(this._alphaMotion.to-this._alphaMotion.from)/this.dur+this._alphaMotion.from),0!==this.motion.length){var t=Math.max(this.ttl,0),e=this.dur-t-this._motionStart[this._curMotion];return this._execMotion(this.motion[this._curMotion],e),this.dur-t>this._motionEnd[this._curMotion]?void(++this._curMotion>=this.motion.length&&(this._curMotion=this.motion.length-1)):void 0}},t.prototype.stop=function(){},t.prototype.finish=function(){this.parent.finish(this)},t.prototype.toString=function(){return["[",this.stime,"|",this.ttl,"/",this.dur,"]","(",this.mode,")",this.text].join("")},t.LINEAR=function(t,e,n,i){return t*n/i+e},t}(),h=function(t){function e(e,n){t.call(this,e,n),this.dur*=this.parent.options.scroll.scale,this.ttl*=this.parent.options.scroll.scale}return s(e,t),Object.defineProperty(e.prototype,"alpha",{set:function(t){this._alpha=t,this.dom.style.opacity=Math.min(Math.min(this._alpha,this.parent.options.global.opacity),this.parent.options.scroll.opacity)+""},enumerable:!0,configurable:!0}),e.prototype.init=function(e){void 0===e&&(e=null),t.prototype.init.call(this,e),this.x=this.parent.width,this.parent.options.scroll.opacity<1&&(this.alpha=this._alpha),this.absolute=!0},e.prototype.update=function(){this.x=this.ttl/this.dur*(this.parent.width+this.width)-this.width},e}(a),s=function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},l=function(){function t(){}return t.transform=function(t,e){t.style.transform=e,t.style.webkitTransform=e,t.style.msTransform=e,t.style.oTransform=e},t}(),c=function(t){function e(){t.apply(this,arguments),this._dirtyCSS=!0}return s(e,t),Object.defineProperty(e.prototype,"x",{get:function(){return this.ttl/this.dur*(this.parent.width+this.width)-this.width},set:function(t){if(null!==this._x&&"number"==typeof this._x){var e=t-this._x;this._x=t,l.transform(this.dom,"translateX("+(this.axis%2==0?e:-e)+"px)")}else this._x=t,this.absolute||(this._x*=this.parent.width),this.axis%2==0?this.dom.style.left=this._x+(this.align%2==0?0:-this.width)+"px":this.dom.style.right=this._x+(this.align%2==0?-this.width:0)+"px"},enumerable:!0,configurable:!0}),e.prototype.update=function(){this._dirtyCSS&&(this.dom.style.transition="transform "+this.ttl+"ms linear",this.x=-this.width,this._dirtyCSS=!1)},e.prototype.invalidate=function(){t.prototype.invalidate.call(this),this._dirtyCSS=!0},e.prototype.stop=function(){t.prototype.stop.call(this),this.dom.style.transition="",this.x=this._x,this._x=null,this.x=this.x,this._dirtyCSS=!0},e}(h),p=function(){function t(){this._bindings={}}return t._simpleCssScrollingInitializer=function(t,e){var n=new c(t,e);switch(n.mode){case 1:n.align=0,n.axis=0;break;case 2:n.align=2,n.axis=2;break;case 6:n.align=1,n.axis=1}return n.init(),t.stage.appendChild(n.dom),n},t._simpleScrollingInitializer=function(t,e){var n=new h(t,e);switch(n.mode){case 1:n.align=0,n.axis=0;break;case 2:n.align=2,n.axis=2;break;case 6:n.align=1,n.axis=1}return n.init(),t.stage.appendChild(n.dom),n},t._simpleAnchoredInitializer=function(t,e){var n=new a(t,e);switch(n.mode){case 4:n.align=2,n.axis=2;break;case 5:n.align=0,n.axis=0}return n.init(),t.stage.appendChild(n.dom),n},t._advancedCoreInitializer=function(t,e){var n=new a(t,e);return n.init(),n.transform=i.Matrix3D.createRotationMatrix(0,e.rY,e.rZ).flatArray,t.stage.appendChild(n.dom),n},t.defaultFactory=function(){var e=new t;return e.bind(1,t._simpleScrollingInitializer),e.bind(2,t._simpleScrollingInitializer),e.bind(6,t._simpleScrollingInitializer),e.bind(4,t._simpleAnchoredInitializer),e.bind(5,t._simpleAnchoredInitializer),e.bind(7,t._advancedCoreInitializer),e.bind(17,t._advancedCoreInitializer),e},t.defaultCssRenderFactory=function(){var e=new t;return e.bind(1,t._simpleCssScrollingInitializer),e.bind(2,t._simpleCssScrollingInitializer),e.bind(6,t._simpleCssScrollingInitializer),e.bind(4,t._simpleAnchoredInitializer),e.bind(5,t._simpleAnchoredInitializer),e.bind(7,t._advancedCoreInitializer),e.bind(17,t._advancedCoreInitializer),e},t.defaultCanvasRenderFactory=function(){throw new Error("Not implemented")},t.defaultSvgRenderFactory=function(){throw new Error("Not implemented")},t.prototype.bind=function(t,e){this._bindings[t]=e},t.prototype.canCreate=function(t){return this._bindings.hasOwnProperty(t.mode)},t.prototype.create=function(t,e){if(null===e||!e.hasOwnProperty("mode"))throw new Error("Comment format incorrect");if(!this._bindings.hasOwnProperty(e.mode))throw new Error("No binding for comment type "+e.mode);return this._bindings[e.mode](t,e)},t}(),s=function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},u=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._pools=[[]],this.avoid=1,this._width=t,this._height=e}return t.prototype.willCollide=function(t,e){return t.stime+t.ttl>=e.stime+e.ttl/2},t.prototype.pathCheck=function(t,e,n){for(var i=t+e.height,r=e.right,o=0;o<n.length;o++)if(!(n[o].y>i||n[o].bottom<t)){if(!(n[o].right<e.x||n[o].x>r))return!1;if(this.willCollide(n[o],e))return!1}return!0},t.prototype.assign=function(t,e){for(;this._pools.length<=e;)this._pools.push([]);var n=this._pools[e];if(0===n.length)return t.cindex=e,0;if(this.pathCheck(0,t,n))return t.cindex=e,0;for(var i=0,r=0;r<n.length&&!((i=n[r].bottom+this.avoid)+t.height>this._height);r++)if(this.pathCheck(i,t,n))return t.cindex=e,i;return this.assign(t,e+1)},t.prototype.add=function(t){t.height>this._height?(t.cindex=-2,t.y=0):(t.y=this.assign(t,0),o.binsert(this._pools[t.cindex],t,function(t,e){return t.bottom<e.bottom?-1:t.bottom>e.bottom?1:0}))},t.prototype.remove=function(t){if(!(t.cindex<0)){if(t.cindex>=this._pools.length)throw new Error("cindex out of bounds");var e=this._pools[t.cindex].indexOf(t);e<0||this._pools[t.cindex].splice(e,1)}},t.prototype.setBounds=function(t,e){this._width=t,this._height=e},t}(),d=function(t){function e(){t.apply(this,arguments)}return s(e,t),e.prototype.add=function(e){t.prototype.add.call(this,e),e.x=(this._width-e.width)/2},e.prototype.willCollide=function(t,e){return!0},e.prototype.pathCheck=function(t,e,n){for(var i=t+e.height,r=0;r<n.length;r++)if(!(n[r].y>i||n[r].bottom<t))return!1;return!0},e}(u),f=function(){function t(t){var e=0;this._listeners={},this._lastPosition=0,this.stage=t,this.options={global:{opacity:1,scale:1,className:"cmt"},scroll:{opacity:1,scale:1},limit:0,seekTrigger:2e3},this.timeline=[],this.runline=[],this.position=0,this.factory=null,this.filter=null,this.csa={scroll:new u(0,0),top:new d(0,0),bottom:new d(0,0),reverse:new u(0,0),scrollbtm:new u(0,0)},this.width=this.stage.offsetWidth,this.height=this.stage.offsetHeight,this._startTimer=function(){if(!(e>0)){var t=(new Date).getTime(),n=this;e=window.setInterval(function(){var e=(new Date).getTime()-t;t=(new Date).getTime(),n.onTimerEvent(e,n)},10)}},this._stopTimer=function(){window.clearInterval(e),e=0}}var e=function(t,e){return t.stime>e.stime?2:t.stime<e.stime?-2:t.date>e.date?1:t.date<e.date?-1:null!=t.dbid&&null!=e.dbid?t.dbid>e.dbid?1:t.dbid<e.dbid?-1:0:0};return t.prototype.stop=function(){this._stopTimer(),this.runline.forEach(function(t){t.stop()})},t.prototype.start=function(){this._startTimer()},t.prototype.seek=function(t){this.position=o.bsearch(this.timeline,t,function(t,e){return t<e.stime?-1:t>e.stime?1:0})},t.prototype.validate=function(t){return null!=t&&this.filter.doValidate(t)},t.prototype.load=function(t){this.timeline=t,this.timeline.sort(e),this.dispatchEvent("load")},t.prototype.insert=function(t){o.binsert(this.timeline,t,e)<=this.position&&this.position++,this.dispatchEvent("insert")},t.prototype.clear=function(){for(;this.runline.length>0;)this.runline[0].finish();this.dispatchEvent("clear")},t.prototype.setBounds=function(){this.width=this.stage.offsetWidth,this.height=this.stage.offsetHeight,this.dispatchEvent("resize");for(var t in this.csa)this.csa[t].setBounds(this.width,this.height);this.stage.style.perspective=this.width/Math.tan(55*Math.PI/180)/2+"px",this.stage.style.webkitPerspective=this.width/Math.tan(55*Math.PI/180)/2+"px"},t.prototype.init=function(t){if(this.setBounds(),null==this.filter&&(this.filter=new m),null==this.factory)switch(t){case"legacy":this.factory=p.defaultFactory();break;default:case"css":this.factory=p.defaultCssRenderFactory()}},t.prototype.time=function(t){if(t-=1,this.position>=this.timeline.length||Math.abs(this._lastPosition-t)>=this.options.seekTrigger){if(this.seek(t),this._lastPosition=t,this.timeline.length<=this.position)return}else this._lastPosition=t;for(;this.position<this.timeline.length&&this.timeline[this.position].stime<=t;this.position++)this.options.limit>0&&this.runline.length>=this.options.limit||this.validate(this.timeline[this.position])&&this.send(this.timeline[this.position])},t.prototype.rescale=function(){},t.prototype.send=function(t){if(8===t.mode)return console.log(t),void(this.scripting&&console.log(this.scripting.eval(t.code)));if(null==this.filter||null!=(t=this.filter.doModify(t))){var e=this.factory.create(this,t);switch(e.mode){default:case 1:this.csa.scroll.add(e);break;case 2:this.csa.scrollbtm.add(e);break;case 4:this.csa.bottom.add(e);break;case 5:this.csa.top.add(e);break;case 6:this.csa.reverse.add(e);break;case 7:case 17:}e.y=e.y,this.dispatchEvent("enterComment",e),this.runline.push(e)}},t.prototype.finish=function(t){this.dispatchEvent("exitComment",t),this.stage.removeChild(t.dom);var e=this.runline.indexOf(t);switch(e>=0&&this.runline.splice(e,1),t.mode){default:case 1:this.csa.scroll.remove(t);break;case 2:this.csa.scrollbtm.remove(t);break;case 4:this.csa.bottom.remove(t);break;case 5:this.csa.top.remove(t);break;case 6:this.csa.reverse.remove(t);break;case 7:}},t.prototype.addEventListener=function(t,e){void 0!==this._listeners[t]?this._listeners[t].push(e):this._listeners[t]=[e]},t.prototype.dispatchEvent=function(t,e){if(void 0!==this._listeners[t])for(var n=0;n<this._listeners[t].length;n++)try{this._listeners[t][n](e)}catch(t){console.err(t.stack)}},t.prototype.onTimerEvent=function(t,e){for(var n=0;n<e.runline.length;n++){e.runline[n].time(t)}},t}();e.default=f;/**
 * Comment Filters Module Simplified
 * @license MIT
 * @author Jim Chen
 */
var m=function(){function t(e,n){for(var i=e.subject.split("."),r=n;i.length>0;){var o=i.shift();if(""!==o&&(r.hasOwnProperty(o)&&(r=r[o]),null===r||void 0===r)){r=null;break}}if(null===r)return!0;switch(e.op){case"<":return r<e.value;case">":return r>e.value;case"~":case"regexp":return new RegExp(e.value).test(r.toString());case"=":case"eq":return e.value===("number"==typeof r?r:r.toString());case"!":case"not":return!t(e.value,r);case"&&":case"and":return!!Array.isArray(e.value)&&e.value.every(function(e){return t(e,r)});case"||":case"or":return!!Array.isArray(e.value)&&e.value.some(function(e){return t(e,r)});default:return!1}}function e(){this.rules=[],this.modifiers=[],this.allowUnknownTypes=!0,this.allowTypes={1:!0,2:!0,4:!0,5:!0,6:!0,7:!0,8:!0,17:!0}}return e.prototype.doModify=function(t){return this.modifiers.reduce(function(t,e){return e(t)},t)},e.prototype.beforeSend=function(t){return t},e.prototype.doValidate=function(e){return!!e.hasOwnProperty("mode")&&(!((!this.allowUnknownTypes||e.mode.toString()in this.allowTypes)&&!this.allowTypes[e.mode.toString()])&&this.rules.every(function(n){try{var i=t(n,e)}catch(t){var i=!1}return"accept"===n.mode?i:!i}))},e.prototype.addRule=function(t){if("accept"!==t.mode&&"reject"!==t.mode)throw new Error("Rule must be of accept type or reject type.");this.rules.push(t)},e.prototype.addModifier=function(t){if("function"!=typeof t)throw new Error("Modifiers need to be functions.");this.modifiers.push(t)},e}(),y=(function(){function t(){this._started=!1,this._destroyed=!1,this._staticSources={},this._dynamicSources={},this._parsers={},this._targets=[]}t.SOURCE_JSON="JSON",t.SOURCE_XML="XML",t.SOURCE_TEXT="TEXT",t.BaseHttpProvider=function(t,e,n,i,r){return new Promise(function(o,s){var a=new XMLHttpRequest,h=e;if(i&&("POST"===t||"PUT"===t)){h+="?";var l=[];for(var c in i)i.hasOwnProperty(c)&&l.push(encodeURIComponent(c)+"="+encodeURIComponent(i[c]));h+=l.join("&")}a.onload=function(){this.status>=200&&this.status<300?o(this.response):s(new Error(this.status+" "+this.statusText))},a.onerror=function(){s(new Error(this.status+" "+this.statusText))},a.open(t,h),a.responseType="string"==typeof n?n:"",void 0!==r?a.send(r):a.send()})},t.JSONProvider=function(e,n,i,r){return t.BaseHttpProvider(e,n,"json",i,r).then(function(t){return t})},t.XMLProvider=function(e,n,i,r){return t.BaseHttpProvider(e,n,"document",i,r).then(function(t){return t})},t.TextProvider=function(e,n,i,r){return t.BaseHttpProvider(e,n,"text",i,r).then(function(t){return t})},t.prototype.addStaticSource=function(t,e){if(this._destroyed)throw new Error("Comment provider has been destroyed, cannot attach more sources.");return e in this._staticSources||(this._staticSources[e]=[]),this._staticSources[e].push(t),this},t.prototype.addDynamicSource=function(t,e){if(this._destroyed)throw new Error("Comment provider has been destroyed, cannot attach more sources.");return e in this._dynamicSources||(this._dynamicSources[e]=[]),this._dynamicSources[e].push(t),this},t.prototype.addTarget=function(t){if(this._destroyed)throw new Error("Comment provider has been destroyed, cannot attach more targets.");if(!(t instanceof f))throw new Error("Expected the target to be an instance of CommentManager.");return this._targets.push(t),this},t.prototype.addParser=function(t,e){if(this._destroyed)throw new Error("Comment provider has been destroyed, cannot attach more parsers.");return e in this._parsers||(this._parsers[e]=[]),this._parsers[e].unshift(t),this},t.prototype.applyParsersOne=function(t,e){return new Promise(function(n,i){if(!(e in this._parsers))return void i(new Error('No parsers defined for "'+e+'"'));for(var r=0;r<this._parsers[e].length;r++){var o=null;try{o=this._parsers[e][r].parseOne(t)}catch(t){console.error(t)}if(null!==o)return void n(o)}i(new Error("Ran out of parsers for they target type"))}.bind(this))},t.prototype.applyParsersList=function(t,e){return new Promise(function(n,i){if(!(e in this._parsers))return void i(new Error('No parsers defined for "'+e+'"'));for(var r=0;r<this._parsers[e].length;r++){var o=null;try{o=this._parsers[e][r].parseMany(t)}catch(t){console.error(t)}if(null!==o)return void n(o)}i(new Error("Ran out of parsers for the target type"))}.bind(this))},t.prototype.load=function(){if(this._destroyed)throw new Error("Cannot load sources on a destroyed provider.");var t=[];for(var e in this._staticSources)t.push(y.any(this._staticSources[e]).then(function(t){return this.applyParsersList(t,e)}.bind(this)));return 0===t.length?Promise.resolve([]):y.any(t).then(function(t){for(var e=0;e<this._targets.length;e++)this._targets[e].load(t);return Promise.resolve(t)}.bind(this))},t.prototype.start=function(){if(this._destroyed)throw new Error("Cannot start a provider that has been destroyed.");return this._started=!0,this.load().then(function(t){for(var e in this._dynamicSources)this._dynamicSources[e].forEach(function(t){t.addEventListener("receive",function(t){for(var n=0;n<this._targets.length;n++)this._targets[n].send(this.applyParserOne(t,e))}.bind(this))}.bind(this));return Promise.resolve(t)}.bind(this))},t.prototype.send=function(t,e){throw new Error("Not implemented")},t.prototype.destroy=function(){return this._destroyed?Promise.resolve():(this._destroyed=!0,Promise.resolve())}}(),function(){var t={};return t.any=function(t){return Array.isArray(t)?0===t.length?Promise.reject():new Promise(function(e,n){for(var i=!1,r=0,o=[],s=0;s<t.length;s++)t[s].then(function(t){r++,i||(i=!0,e(t))}).catch(function(e){return function(s){r++,o[e]=s,r===t.length&&(i||n(o))}}(s))}):Promise.resolve(t)},t}());(function(){var t={},e=function(t){return t.replace(/\t/,"\\t")},n=function t(e){if("["!==e.charAt(0))return e;switch(e.charAt(e.length-1)){case"]":return e;case'"':return e+"]";case",":return e.substring(0,e.length-1)+'"]';default:return t(e.substring(0,e.length-1))}},i=function(t){return t=t.replace(new RegExp("</([^d])","g"),"</disabled $1"),t=t.replace(new RegExp("</(S{2,})","g"),"</disabled $1"),t=t.replace(new RegExp("<([^d/]W*?)","g"),"<disabled $1"),t=t.replace(new RegExp("<([^/ ]{2,}W*?)","g"),"<disabled $1")};t.XMLParser=function(t){this._attemptFix=!0,this._logBadComments=!0,"object"===(void 0===t?"undefined":r(t))&&(this._attemptFix=!1!==t.attemptFix,this._logBadComments=!1!==t.logBadComments)},t.XMLParser.prototype.parseOne=function(t){try{var i=t.getAttribute("p").split(",")}catch(t){return null}var r=t.textContent,o={};if(o.stime=Math.round(1e3*parseFloat(i[0])),o.size=parseInt(i[2]),o.color=parseInt(i[3]),o.mode=parseInt(i[1]),o.date=parseInt(i[4]),o.pool=parseInt(i[5]),o.position="absolute",null!=i[7]&&(o.dbid=parseInt(i[7])),o.hash=i[6],o.border=!1,o.mode<7)o.text=r.replace(/(\/n|\\n|\n|\r\n)/g,"\n");else if(7===o.mode)try{this._attemptFix&&(r=e(n(r)));var s=JSON.parse(r);if(o.shadow=!0,o.x=parseFloat(s[0]),o.y=parseFloat(s[1]),(Math.floor(o.x)<o.x||Math.floor(o.y)<o.y)&&(o.position="relative"),o.text=s[4].replace(/(\/n|\\n|\n|\r\n)/g,"\n"),o.rZ=0,o.rY=0,s.length>=7&&(o.rZ=parseInt(s[5],10),o.rY=parseInt(s[6],10)),o.motion=[],o.movable=!1,s.length>=11){o.movable=!0;var a=500,h={x:{from:o.x,to:parseFloat(s[7]),dur:a,delay:0},y:{from:o.y,to:parseFloat(s[8]),dur:a,delay:0}};if(""!==s[9]&&(a=parseInt(s[9],10),h.x.dur=a,h.y.dur=a),""!==s[10]&&(h.x.delay=parseInt(s[10],10),h.y.delay=parseInt(s[10],10)),s.length>11&&(o.shadow="false"!==s[11]&&!1!==s[11],null!=s[12]&&(o.font=s[12]),s.length>14)){"relative"===o.position&&(this._logBadComments&&console.warn("Cannot mix relative and absolute positioning!"),o.position="absolute");for(var l=s[14],c={x:h.x.from,y:h.y.from},p=[],u=new RegExp("([a-zA-Z])\\s*(\\d+)[, ](\\d+)","g"),d=l.split(/[a-zA-Z]/).length-1,f=u.exec(l);null!==f;){switch(f[1]){case"M":c.x=parseInt(f[2],10),c.y=parseInt(f[3],10);break;case"L":p.push({x:{from:c.x,to:parseInt(f[2],10),dur:a/d,delay:0},y:{from:c.y,to:parseInt(f[3],10),dur:a/d,delay:0}}),c.x=parseInt(f[2],10),c.y=parseInt(f[3],10)}f=u.exec(l)}h=null,o.motion=p}null!==h&&o.motion.push(h)}o.dur=2500,s[3]<12&&(o.dur=1e3*s[3]);var m=s[2].split("-");if(null!=m&&m.length>1){var y=parseFloat(m[0]),g=parseFloat(m[1]);o.opacity=y,y!==g&&(o.alpha={from:y,to:g})}}catch(t){this._logBadComments&&(console.warn("Error occurred in JSON parsing. Could not parse comment."),console.log("[DEBUG] "+r))}else 8===o.mode?o.code=r:this._logBadComments&&(console.warn("Unknown comment type : "+o.mode+". Not doing further parsing."),console.log("[DEBUG] "+r));return null!==o.text&&"string"==typeof o.text&&(o.text=o.text.replace(/\u25a0/g,"█")),o},t.XMLParser.prototype.parseMany=function(t){var e=[];try{e=t.getElementsByTagName("d")}catch(t){return null}for(var n=[],i=0;i<e.length;i++){var r=this.parseOne(e[i]);null!==r&&n.push(r)}return n},t.TextParser=function(e){this._allowInsecureDomParsing=!0,this._attemptEscaping=!0,this._canSecureNativeParse=!1,"object"===(void 0===e?"undefined":r(e))&&(this._allowInsecureDomParsing=!1!==e.allowInsecureDomParsing,this._attemptEscaping=!1!==e.attemptEscaping),"undefined"!=typeof document&&document&&document.createElement||(this._allowInsecureDomParsing=!1),"undefined"!=typeof DOMParser&&null!==DOMParser&&(this._canSecureNativeParse=!0),(this._allowInsecureDomParsing||this._canSecureNativeParse)&&(this._xmlParser=new t.XMLParser(e))},t.TextParser.prototype.parseOne=function(t){if(this._allowInsecureDomParsing){var e=t;this._attemptEscaping&&(e=i(e));var n=document.createElement("div");n.innerHTML=e;var r=n.getElementsByTagName("d");return 1!==r.length?null:this._xmlParser.parseOne(r[0])}if(this._canSecureNativeParse){var o=new DOMParser;return this._xmlParser.parseOne(o.parseFromString(t,"application/xml"))}throw new Error("Secure native js parsing not implemented yet.")},t.TextParser.prototype.parseMany=function(t){if(this._allowInsecureDomParsing){var e=t;this._attemptEscaping&&(e=i(e));var n=document.createElement("div");return n.innerHTML=e,this._xmlParser.parseMany(n)}if(this._canSecureNativeParse){var r=new DOMParser;return this._xmlParser.parseMany(r.parseFromString(t,"application/xml"))}throw new Error("Secure native js parsing not implemented yet.")}})(),function(){var t={};t.JSONParser=function(t){this._logBadComments=!0,this._logNotImplemented=!1,"object"===(void 0===t?"undefined":r(t))&&(this._logBadComments=!1!==t.logBadComments,this._logNotImplemented=!0===t.logNotImplemented)},t.JSONParser.prototype.parseOne=function(t){var e={};if("object"!==(void 0===t?"undefined":r(t))||null==t||!t.hasOwnProperty("c"))return null;var n=t.c.split(",");if(n.length>=6){if(e.stime=1e3*parseFloat(n[0]),e.color=parseInt(n[1]),e.mode=parseInt(n[2]),e.size=parseInt(n[3]),e.hash=n[4],e.date=parseInt(n[5]),e.position="absolute",7!==e.mode)e.text=t.m.replace(/(\/n|\\n|\n|\r\n|\\r)/g,"\n"),e.text=e.text.replace(/\r/g,"\n"),e.text=e.text.replace(/\s/g," ");else{try{var i=JSON.parse(t.m)}catch(t){return this._logBadComments&&(console.warn("Error parsing internal data for comment"),console.log("[Dbg] "+e.text)),null}if(e.position="relative",e.text=i.n,e.text=e.text.replace(/\ /g," "),"number"==typeof i.a?e.opacity=i.a:e.opacity=1,"object"===r(i.p)?(e.x=i.p.x/1e3,e.y=i.p.y/1e3):(e.x=0,e.y=0),"number"==typeof i.c)switch(i.c){case 0:e.align=0;break;case 2:e.align=1;break;case 6:e.align=2;break;case 8:e.align=3;break;default:this._logNotImplemented&&console.log("Cannot handle aligning to center! AlignMode="+i.c)}if(e.axis=0,e.shadow=i.b,e.dur=4e3,"number"==typeof i.l&&(e.dur=1e3*i.l),null!=i.z&&i.z.length>0){e.movable=!0,e.motion=[];for(var o=0,s={x:e.x,y:e.y,alpha:e.opacity,color:e.color},a=0;a<i.z.length;a++){var h=null!=i.z[a].l?1e3*i.z[a].l:500;o+=h;var l={};i.z[a].hasOwnProperty("rx")&&"number"==typeof i.z[a].rx&&this._logNotImplemented&&console.log("Encountered animated x-axis rotation. Ignoring."),i.z[a].hasOwnProperty("e")&&"number"==typeof i.z[a].e&&this._logNotImplemented&&console.log("Encountered animated y-axis rotation. Ignoring."),i.z[a].hasOwnProperty("d")&&"number"==typeof i.z[a].d&&this._logNotImplemented&&console.log("Encountered animated z-axis rotation. Ignoring."),i.z[a].hasOwnProperty("x")&&"number"==typeof i.z[a].x&&(l.x={from:s.x,to:i.z[a].x/1e3,dur:h,delay:0}),i.z[a].hasOwnProperty("y")&&"number"==typeof i.z[a].y&&(l.y={from:s.y,to:i.z[a].y/1e3,dur:h,delay:0}),s.x=l.hasOwnProperty("x")?l.x.to:s.x,s.y=l.hasOwnProperty("y")?l.y.to:s.y,i.z[a].hasOwnProperty("t")&&"number"==typeof i.z[a].t&&i.z[a].t!==s.alpha&&(l.alpha={from:s.alpha,to:i.z[a].t,dur:h,delay:0},s.alpha=l.alpha.to),i.z[a].hasOwnProperty("c")&&"number"==typeof i.z[a].c&&i.z[a].c!==s.color&&(l.color={from:s.color,to:i.z[a].c,dur:h,delay:0},s.color=l.color.to),e.motion.push(l)}e.dur=o+(e.moveDelay?e.moveDelay:0)}i.hasOwnProperty("w")&&(i.w.hasOwnProperty("f")&&(e.font=i.w.f),i.w.hasOwnProperty("l")&&Array.isArray(i.w.l)&&i.w.l.length>0&&this._logNotImplemented&&console.log("[Dbg] Filters not supported! "+JSON.stringify(i.w.l))),null!=i.r&&null!=i.k&&(e.rX=i.r,e.rY=i.k)}return e}return this._logBadComments&&(console.warn("Dropping this comment due to insufficient parameters. Got: "+n.length),console.log("[Dbg] "+t.c)),null},t.JSONParser.prototype.parseMany=function(t){if(!Array.isArray(t))return null;for(var e=[],n=0;n<t.length;n++){var i=this.parseOne(t[n]);null!==i&&e.push(i)}return e},t.TextParser=function(e){this._jsonParser=new t.JSONParser(e)},t.TextParser.prototype.parseOne=function(t){try{return this._jsonParser.parseOne(JSON.parse(t))}catch(t){return console.warn(t),null}},t.TextParser.prototype.parseMany=function(t){try{return this._jsonParser.parseMany(JSON.parse(t))}catch(t){return console.warn(t),null}}}(),function(){var t={},e=function(t){return"number"==typeof t.mode&&"number"==typeof t.stime&&((8!==t.mode||"string"==typeof t.code)&&"string"==typeof t.text)};t.JSONParser=function(){},t.JSONParser.prototype.parseOne=function(t){return e(t)?t:null},t.JSONParser.prototype.parseMany=function(t){return t.every(e)?t:null},t.XMLParser=function(){},t.XMLParser.prototype.parseOne=function(t){var e={};try{e.stime=parseInt(t.getAttribute("stime")),e.mode=parseInt(t.getAttribute("mode")),e.size=parseInt(t.getAttribute("size")),e.color=parseInt(t.getAttribute("color")),e.text=t.textContent}catch(t){return null}return e},t.XMLParser.prototype.parseMany=function(t){try{var e=t.getElementsByTagName("comment")}catch(t){return null}for(var n=[],i=0;i<e.length;i++){var r=this.parseOne(e[i]);null!==r&&n.push(r)}return n}}()},function(t,e,n){var i=n(10);"string"==typeof i&&(i=[[t.i,i,""]]);n(1)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(0)(),e.push([t.i,'.abp {\n  position: relative;\n}\n\n.abp .container {\n  border: 0;\n  bottom: 0;\n  display: block;\n  left: 0;\n  margin: 0;\n  overflow: hidden;\n  position: absolute;\n  right: 0;\n  top: 0;\n  touch-callout: none;\n  transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  z-index: 9999;\n}\n\n.abp .container .cmt {\n  color: #fff;\n  font-family: SimHei, SimSun, Heiti, "MS Mincho", "Meiryo", "Microsoft YaHei", monospace;\n  font-size: 25px;\n  letter-spacing: 0;\n  line-height: 100%;\n  margin: 0;\n  padding: 3px 0 0 0;\n  position: absolute;\n  text-decoration: none;\n  text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black;\n  -webkit-text-size-adjust: none;\n      -ms-text-size-adjust: none;\n          text-size-adjust: none;\n  transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n  -ms-transform-origin: 0% 0%;\n      transform-origin: 0% 0%;\n  white-space: pre;\n  word-break: keep-all;\n}\n\n.abp .container .cmt.noshadow {\n  text-shadow: none;\n}\n\n.abp .container .cmt.rshadow {\n  text-shadow: -1px 0 white, 0 1px white, 1px 0 white, 0 -1px white;\n}\n\n/** Aliases for Chinese named fonts because they don\'t work on *nix **/\n@font-face{\n  font-family: "\\9ED1\\4F53";\n  src:local(\'SimHei\');\n}\n\n@font-face{\n  font-family: "\\5B8B\\4F53";\n  src:local(\'SimSun\');\n}\n\n@font-face{\n  font-family: "\\534E\\6587\\6977\\4F53";\n  src:local(\'SimKai\');\n}\n\n@font-face{\n  font-family: "\\5E7C\\5706";\n  src:local(\'YouYuan\');\n}\n\n@font-face{\n  font-family: "\\5FAE\\8F6F\\96C5\\9ED1";\n  src:local(\'Microsoft YaHei\');\n}',""])},function(t,e,n){var i=n(12);"string"==typeof i&&(i=[[t.i,i,""]]);n(1)(i,{});i.locals&&(t.exports=i.locals)},function(t,e,n){e=t.exports=n(0)(),e.push([t.i,".aliplayer-comment-stage\n{\n    height: 100%;\n    position: absolute;\n    width: 100%;\n    left: 0px;\n    bottom: 61px;\n    overflow: hidden;\n}",""])},function(t,e){t.exports="<div id='aliplayer-comment-stage' class='container aliplayer-comment-stage'>\n</div>"},,,,,function(t,e,n){t.exports=n(19)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(2),o=i(r),s=n(7),a=i(s);window.AliPlayerComponent={StaticAdComponent:o.default,CommentComponent:a.default}}]);